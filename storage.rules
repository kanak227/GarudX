rules_version = '2';

service firebase.storage {
  match /b/{bucket}/o {
    // TESTING MODE: Allow unauthenticated access
    // TODO: Restrict to authenticated users in production
    
    // Test files
    match /test/{fileName} {
      allow read, write: if true; // Allow all access for testing
    }
    
    // Chat files - images, documents, etc. (TESTING MODE)
    match /chat_files/{callSessionId}/{fileName} {
      allow read, write: if true; // Temporarily allow all access for testing
    }
    
    // Voice messages (TESTING MODE)
    match /voice_messages/{callSessionId}/{fileName} {
      allow read, write: if true; // Temporarily allow all access for testing
    }
    
    // Profile pictures (if needed later)
    match /profile_pictures/{userId}/{fileName} {
      allow read: if true; // Public read for profile pictures
      allow write: if true; // Allow all writes for testing
    }
    
    // Allow all other paths for testing
    match /{allPaths=**} {
      allow read, write: if true; // Allow all access for testing
    }
  }
}
